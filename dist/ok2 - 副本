#!/bin/bash

# 设置变量
REMOTE_HOST="root@11.0.24.216"
REMOTE_PATH="/home/dgmone/modules/nginx/projects/admin"
LOCAL_DIST_PATH="D:/Intple/intpleProject/yqDataone/20Src/admin-web/dist"

# 1. 显示更新前的目录内容
# echo "Remote Directory contents before update:"
# ssh $REMOTE_HOST "ls -l $REMOTE_PATH/dist/"

# 1. 删除远程服务器上的旧 dist 目录
echo "Removing Remote old dist directory..."
ssh $REMOTE_HOST "rm -rf $REMOTE_PATH/dist"

# 3. 传输新的 dist 目录
echo "Uploading new dist directory..."
scp -r "$LOCAL_DIST_PATH" $REMOTE_HOST:$REMOTE_PATH/

# 4. 显示更新后的目录内容
# echo "Remote Directory contents after update:"
# ssh $REMOTE_HOST "ls -l $REMOTE_PATH/dist/"

echo "Deployment completed successfully!"